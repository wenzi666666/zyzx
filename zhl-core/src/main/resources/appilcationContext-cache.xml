<?xml version="1.0" encoding="UTF-8"?>
<ehcache updateCheck="false" name="txswx-ehcache">
    <diskStore path="java.io.tmpdir"/>
    <!-- DefaultCache setting. -->
    <defaultCache maxEntriesLocalHeap="10000" eternal="false" timeToIdleSeconds="300" timeToLiveSeconds="600"
                  overflowToDisk="true" maxEntriesLocalDisk="100000"/>
               
     
    <!-- 自动的成员发现 RMI的组播  
    
    timeToLive是指搜索范围：0是同一台服务器，1是同一个子网，32是指同一站点，64是指同一块地域，128是同一块大陆
    
      -->
    <cacheManagerPeerProviderFactory
    class="net.sf.ehcache.distribution.RMICacheManagerPeerProviderFactory"
    properties="peerDiscovery=automatic,multicastGroupAddress=230.0.0.1,
    multicastGroupPort=4448,timeToLive=${timeToLive}"
	/>
     
     
    <!-- 监听从成员们发向当前CacheManager的消息
    
    	hostname (可选) – 运行监听器的服务器名称。
    					如果hostName不可用，CacheManager将拒绝启动并抛出一个连接被拒绝的异常
    -->    
             
     
   <cacheManagerPeerListenerFactory
		class="net.sf.ehcache.distribution.RMICacheManagerPeerListenerFactory"
		properties="port=40001,
		socketTimeoutMillis=2000"/>
            
     <!--          
       <cacheManagerPeerProviderFactory
        class="net.sf.ehcache.distribution.jgroups.JGroupsCacheManagerPeerProviderFactory"
        properties="connect=UDP(mcast_addr=10.10.10.10;mcast_port=45566;ip_ttl=32; 
        mcast_send_buf_size=120000;mcast_recv_buf_size=80000): 
        PING(timeout=2000;num_initial_members=6): 
        MERGE2(min_interval=5000;max_interval=10000): 
        FD_SOCK:VERIFY_SUSPECT(timeout=1500): 
        pbcast.NAKACK(gc_lag=10;retransmit_timeout=3000): 
        UNICAST(timeout=5000): 
        pbcast.STABLE(desired_avg_gossip=20000): 
        FRAG: 
        pbcast.GMS(join_timeout=5000;join_retry_timeout=2000; 
        shun=false;print_local_addr=true)"
        propertySeparator="::" />
		 -->    
               
               
                  
    <!-- 登录用户token对应对象的缓存  timeToIdleSeconds 不活跃的缓存时间 -->              
    <cache name="UserSimpleCache" maxElementsInMemory="900000" timeToIdleSeconds="7200" overflowToDisk="false" diskPersistent="false">
    	 
    	 <!--   <cacheEventListenerFactory class="net.sf.ehcache.distribution.RMICacheReplicatorFactory" 
				properties="replicateAsynchronously=true, replicatePuts=true, replicateUpdates=true,replicateUpdatesViaCopy=true, replicateRemovals=true "/>  
		-->  
		
<!-- 		 <cacheEventListenerFactory  class="net.sf.ehcache.distribution.jgroups.JGroupsCacheReplicatorFactory"/> -->
		 <cacheEventListenerFactory  class="net.sf.ehcache.distribution.RMICacheReplicatorFactory" properties="replicateUpdatesViaCopy=true"/>
		 <bootstrapCacheLoaderFactory class="net.sf.ehcache.distribution.RMIBootstrapCacheLoaderFactory"/>
    </cache>
    <!-- 缓存对象的token -->  
    <cache name="TokenCache" maxElementsInMemory="90000" timeToIdleSeconds="7200" overflowToDisk="false" diskPersistent="false">
		 <cacheEventListenerFactory  class="net.sf.ehcache.distribution.RMICacheReplicatorFactory" properties="replicateUpdatesViaCopy=true"/>
		 <bootstrapCacheLoaderFactory class="net.sf.ehcache.distribution.RMIBootstrapCacheLoaderFactory"/>    </cache>  

    <!-- 被踢出的token，保留1小时 -->  
    <cache name="KickOutTokenCache" maxElementsInMemory="90000" timeToIdleSeconds="3600" overflowToDisk="false" diskPersistent="false">  
		 <cacheEventListenerFactory  class="net.sf.ehcache.distribution.RMICacheReplicatorFactory" properties="replicateUpdatesViaCopy=true"/>
		 <bootstrapCacheLoaderFactory class="net.sf.ehcache.distribution.RMIBootstrapCacheLoaderFactory"/>
	</cache>
     <!-- app应用信息缓存，空闲缓存1小时，不活跃缓存1小时 -->
    <cache name="appCache" maxElementsInMemory="3600" timeToIdleSeconds="3600" overflowToDisk="false" diskPersistent="false">
		 <cacheEventListenerFactory  class="net.sf.ehcache.distribution.RMICacheReplicatorFactory" properties="replicateUpdatesViaCopy=true"/>
		 <bootstrapCacheLoaderFactory class="net.sf.ehcache.distribution.RMIBootstrapCacheLoaderFactory"/>
    </cache>  
   
    <!-- 活跃用户，为单点登录的ticket所用，保留1小时 -->  
    <cache name="ticketCache" maxElementsInMemory="90000" timeToIdleSeconds="3600" overflowToDisk="false" diskPersistent="false">
		 <cacheEventListenerFactory  class="net.sf.ehcache.distribution.RMICacheReplicatorFactory" properties="replicateUpdatesViaCopy=true"/>
		 <bootstrapCacheLoaderFactory class="net.sf.ehcache.distribution.RMIBootstrapCacheLoaderFactory"/>
    </cache>
   
    <!-- 空闲时间保留1天，如果一直活跃，基本是长期存在了 -->
    <cache name="usernamesCache" maxElementsInMemory="900000" timeToIdleSeconds="7200" overflowToDisk="false" diskPersistent="false"/>
      
    
</ehcache>